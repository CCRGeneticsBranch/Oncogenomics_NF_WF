<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content="Vineela Gangalapudi"><link rel="shortcut icon" href=../img/favicon.ico><title>Setting up Samplesheet - khanlab-NGS-Pipeline</title><link rel=stylesheet href=../css/theme.css><link rel=stylesheet href=../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><link href=../overrides/extra.css rel=stylesheet><script>
        // Current page data
        var mkdocs_page_name = "Setting up Samplesheet";
        var mkdocs_page_input_path = "samplesheet.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=.. class="icon icon-home"> khanlab-NGS-Pipeline </a><div role=search> <form id=rtd-search-form class=wy-form action=../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=..>Overview</a> </li> </ul> <ul class=current> <li class="toctree-l1 current"><a href=./ class="reference internal current">Setting up Samplesheet</a> <ul class=current> <li class=toctree-l2><a class="reference internal" href=#error-handling>Error Handling</a> </li> </ul> </li> </ul> <ul> <li class=toctree-l1><a href=../pipeline_launch/ class="reference internal">Running the Pipeline</a> </li> </ul> <ul> <li class=toctree-l1><a href=../references/ class="reference internal">Pipeline References & Tools</a> </li> </ul> <ul> <li class=toctree-l1><a href=../dockers/ class="reference internal">Dockers</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=..>khanlab-NGS-Pipeline</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=.. class="icon icon-home" aria-label=Docs></a></li> <li class="breadcrumb-item active">Setting up Samplesheet</li> <li class=wy-breadcrumbs-aside> <a href=https://github.com/CCRGeneticsBranch/Oncogenomics_NF_WF/docs/samplesheet.md>Edit on AWS_POC_MVP_NF</a> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <p>There are two ways to generate a samplesheet for the pipeline depending on the use case. If the goal is to process patient fastq files through the pipeline to use the results for secondary analysis, you can follow these steps to <a href=#build-your-own-samplesheet>build your own samplesheet</a>. Along with processing the data, if you want to visualize the results on <a href=https://oncogenomics.ccr.cancer.gov/production/public/ >ClinOmics data portal</a> then follow steps to <a href=#build-samplesheet-from-mastersheet>build samplesheet from mastersheet</a>. This is highly recommended.</p> <h2 id=build-samplesheet-from-mastersheet>Build samplesheet from mastersheet<a class=headerlink href=#build-samplesheet-from-mastersheet title="Permanent link">&para;</a></h2> <p>For khanlab purposes, pipeline is always launched using the information in the mastersheets on biowulf under /data/khanlab space. The script <a href=https://github.com/CCRGeneticsBranch/Oncogenomics_NF_WF/blob/feature/casename/samplesheet_builder.py>samplesheet_builder.py</a> queries the mastersheets to build a samplesheet for the pipeline. A copy of this script is available in the pipeline git repo. This script takes two inputs <code>PatientID</code> and <code>casename</code>. By default, it queries all mastersheets found in the <code>/data/khanlab/projects/DATA/Sequencing_Tracking_Master</code> directory and uses <code>/data/khanlab/projects/DATA</code> as the default input directory.</p> <p>When using a non-Khanlab master sheet, ensure the following columns are included:</p> <ul> <li><strong>Patient ID</strong>: <code>PatientID</code></li> <li><strong>Library ID</strong>: <code>LibraryID</code></li> <li><strong>Enrichment Step</strong>: <code>Capture kit name</code></li> <li><strong>Matched RNA-seq Library</strong>: <code>Matching RNA lib for the Exome library</code> (can be left empty)</li> <li><strong>Matched Normal</strong>: <code>Matching normal lib for the Exome library</code> (can be left empty)</li> <li><strong>Diagnosis</strong>: <code>Diagnosis</code></li> <li><strong>Case Name</strong>: <code>casename for website</code></li> <li><strong>Type</strong>: <code>Data type information</code></li> <li><strong>FCID</strong>: <code>flowcell ID</code> (optional)</li> <li><strong>Project</strong>: <code>Project name</code></li> </ul> <p><strong>Read1, Read2 Construction</strong>: The script uses information from the Input directory and following columns to build the file paths for <code>read1</code> and <code>read2</code>.</p> <ul> <li><strong>Library ID</strong></li> <li><strong>FCID</strong> (optional) If <strong>FCID</strong> is provided, it will be used to build the paths; otherwise, the paths will be constructed using only the <strong>Input Path</strong> and <strong>Library ID</strong>.</li> </ul> <div class=highlight><pre><span></span><code>Usage: python ./samplesheet_builder.py &lt;patient_id&gt; &lt;case_name&gt;
Default Samplesheet Directory: /data/khanlab/projects/DATA/Sequencing_Tracking_Master
Default Input Directory: /data/khanlab/projects/DATA
To use custom directories, modify the script:
   - Change &#39;DEFAULT_SAMPLESHEET_DIR&#39; to your samplesheet directory path
   - Change &#39;DEFAULT_INPUT_DIR&#39; to your input directory path
</code></pre></div> <p><code>python ./samplesheet_builder.py Test_Patient casename</code> will output a file Test_Patient_casename.csv in the same folder.</p> <h3 id=error-handling>Error Handling<a class=headerlink href=#error-handling title="Permanent link">&para;</a></h3> <p>The script includes the following error handling mechanisms:</p> <ul> <li><strong>Invalid <code>read1</code> and <code>read2</code> Paths</strong>: If the paths for <code>read1</code> and <code>read2</code> are invalid, the script will output an error message. This message will prompt you to check and verify the input paths.</li> </ul> <h2 id=build-your-own-samplesheet>Build your own samplesheet<a class=headerlink href=#build-your-own-samplesheet title="Permanent link">&para;</a></h2> <p>Alternately, we can build custom samplesheet without mastersheet. These are the required columns.</p> <table> <thead> <tr> <th>Column name</th> <th>Notes</th> <th>Example</th> </tr> </thead> <tbody> <tr> <td>sample</td> <td>Patient name</td> <td>NCI-Test1</td> </tr> <tr> <td>library</td> <td>Name of the sample library</td> <td>Test1_T1D_E</td> </tr> <tr> <td>read1</td> <td>Full path to the read1</td> <td>/data/khanlab/DATA/Sample_Test1_T1D_E/Sample_Test1_T1D_E.R1.fastq.gz</td> </tr> <tr> <td>read2</td> <td>Full path to the read2</td> <td>/data/khanlab/DATA/Sample_Test1_T1D_E/Sample_Test1_T1D_E.R2.fastq.gz</td> </tr> <tr> <td>sample_captures</td> <td>Name of the capture kit used</td> <td>List of supported capture kits are <a href=../#sequencing-capture-kits>here</a></td> </tr> <tr> <td>Matched_RNA</td> <td>Matched RNA library for the tumor library. This includes cell_line_RNA and tumor_RNA</td> <td>Test1_T1R_T</td> </tr> <tr> <td>Matched_normal</td> <td>Matched exome normal library for the tumor library. This includes panel, blood DNA, cell_line_DNA</td> <td>Test1_N1D_E</td> </tr> <tr> <td>Diagnosis</td> <td>Diagnosis of the patient</td> <td>Glioma</td> </tr> <tr> <td>casename</td> <td>Casename for the patient</td> <td>NCI-Test1</td> </tr> <tr> <td>type</td> <td>Data type</td> <td>example: tumor_RNA, tumor_DNA, normal_DNA, blood_DNA, cell_line_DNA, cell_line_RNA</td> </tr> <tr> <td>FCID</td> <td>Flowcell ID</td> <td>ACJ678349</td> </tr> </tbody> </table> <h3 id=example-samplesheet>Example samplesheet:<a class=headerlink href=#example-samplesheet title="Permanent link">&para;</a></h3> <p>sample,library,read1,read2,sample_captures,Diagnosis,Matched_RNA,Matched_normal,casename,type,FCID,Project Test8,Test5_T1D_E,/data/khanlab/projects/fastq/Test5_T1D_E_R1.fastq.gz,/data/khanlab/projects/fastq/Test5_T1D_E_R2.fastq.gz,clin.ex.v1,Osteosarcoma,,Test8_N2D_E,NFtest0523,tumor_DNA,AWXYNH2,Test Test8,Test8_N2D_E,/data/khanlab/projects/fastq/Test8_N2D_E_R1.fastq.gz,/data/khanlab/projects/fastq/Test8_N2D_E_R2.fastq.gz,clin.ex.v1,Osteosarcoma,,,NFtest0523,normal_DNA,AWXYNH2,Test</p> </div> </div><footer> <div class=rst-footer-buttons role=navigation aria-label="Footer Navigation"> <a href=.. class="btn btn-neutral float-left" title=Overview><span class="icon icon-circle-arrow-left"></span> Previous</a> <a href=../pipeline_launch/ class="btn btn-neutral float-right" title="Running the Pipeline">Next <span class="icon icon-circle-arrow-right"></span></a> </div> <hr> <div role=contentinfo> <!-- Copyright etc --> <p>Copyright &copy; 2025 CCR Genetics Branch</p> </div> Built with <a href=https://www.mkdocs.org/ >MkDocs</a> using a <a href=https://github.com/readthedocs/sphinx_rtd_theme>theme</a> provided by <a href=https://readthedocs.org>Read the Docs</a>. </footer> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span><a href=.. style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../pipeline_launch/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../js/jquery-3.6.0.min.js></script> <script>var base_url = "..";</script> <script src=../js/theme_extra.js></script> <script src=../js/theme.js></script> <script src=../search/main.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 